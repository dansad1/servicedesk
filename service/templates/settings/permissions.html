{% extends 'base.html' %}

{% block content %}
<h2>Управление разрешениями</h2>

<!-- Форма для добавления нового разрешения -->
<form method="post" action="{% url 'create_permission' %}">
    {% csrf_token %}
    <table>
        <thead>
            <tr>
                <th>Действие</th>
                <th>Сущность</th>
                <th>Уровень доступа</th>
                <th>Добавить</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ form.action }}</td>
                <td>{{ form.entity }}</td>
                <td>{{ form.level }}</td>
                <td><button type="submit">Добавить</button></td>
            </tr>
        </tbody>
    </table>
</form>

<!-- Список существующих разрешений с возможностью удаления -->
<table>
    <thead>
        <tr>
            <th>Действие</th>
            <th>Сущность</th>
            <th>Уровень доступа</th>
            <th>Удалить</th>
        </tr>
    </thead>
    <tbody>
        {% for permission in permissions %}
        <tr>
            <td>{{ permission.action }}</td>
            <td>{{ permission.entity }}</td>
            <td>{{ permission.level }}</td>
            <td>
                <form method="post" action="{% url 'delete_permission' permission.id %}">
                    {% csrf_token %}
                    <button type="submit">Удалить</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
