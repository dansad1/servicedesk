{% extends "base.html" %}
{% block content %}

<h2 class='max-w-4xl m-auto text-4xl p-10 text-center'>Список пользователей</h2>
<table class="table">
  <thead>
    <tr>
      <th class="text-center">Имя</th>
      <th class="text-center">Фамилия</th>
      <th class="text-center">Компания</th>
      <th class="text-center">Действия</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
      <tr class="align-middle">
        <td class="text-center">{{ user.first_name }}</td>
        <td class="text-center">{{ user.last_name }}</td>
        <td class="text-center">
            {% if user.company %}
                <a href="{% url 'company_edit' user.company.id %}"><span class="badge text-bg-success px-8 py-2 hover:scale-110">{{ user.company.name }}</span></a>
            {% else %}
                Нет компании
            {% endif %}
        </td>
        <td class="text-center flex justify-evenly align-middle">
            <button onclick="window.location.href='{% url 'edit_profile' user.id %}'" type="button" class="btn btn-sm btn-primary">Редактировать</button>
            <form action="{% url 'user_delete' user.pk %}" class="mb-0" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Вы уверены, что хотите удалить этого пользователя?');">Удалить</button>
            </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
<div class="actions">
  <a href="{% url 'create_user' %}" class="btn btn-success">Создать пользователя</a>
  <a href="{% url 'performer_group_list' %}" class="btn btn-secondary">Перейти к списку групп исполнителей</a>
</div>
{% endblock %}
