{% extends "base.html" %}

{% block content %}
<div class="container mt-3">
  <h2 class="max-w-2xl m-auto text-center text-4xl p-10">Список компаний</h2>
  
  <!-- Таблица компаний -->
  <table id="companiesTable" class="table">
    <thead>
      <tr class="text-center">
        <th class="text-center">Компания</th>
        <th class="text-center">Действия</th>
      </tr>
    </thead>
    <tbody>
      {% for company in companies %}
        <tr class="text-center">
          <td class="text-center">
            <a href="{% url 'company_edit' company.pk %}">{{ company.name }}</a>
          </td>
          <td class="text-center">
            <!-- Форма для удаления компании -->
            <form method="post" action="{% url 'company_delete' company.pk %}" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Вы уверены, что хотите удалить эту компанию?');">Удалить</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if not companies %}
    <p>Компаний не найдено.</p>
  {% endif %}

  <!-- Кнопка для создания новой компании -->
  <button onclick="window.location.href='{% url 'create_company' %}'" class="btn btn-success mt-2" type="button">Создать компанию</button>
</div>

<!-- Подключение DataTables -->
<link href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>

<script>
$(document).ready(function() {
    $('#companiesTable').DataTable();
});
</script>

{% endblock %}
