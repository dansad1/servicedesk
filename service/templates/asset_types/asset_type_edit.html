{% extends "base.html" %}

{% block content %}
  <h2>Тип актива "{{ asset_type.name }}"</h2>

  <!-- Таблица атрибутов -->
  <table class="table">
    <thead>
      <tr>
        <th>Имя атрибута</th>
        <th>Тип атрибута</th>
        <th>Действия</th>
      </tr>
    </thead>
    <tbody>
      {% for asset_type_attr in asset_type.type_attributes.all %}
        <tr>
          <td>{{ asset_type_attr.attribute.name }}</td>
          <td>{{ asset_type_attr.attribute.get_attribute_type_display }}</td>
          <td>
            <a href="{% url 'attribute_edit' asset_type_attr.attribute.id %}">Редактировать</a>
            <a href="{% url 'attribute_delete' asset_type_attr.attribute.id %}" onclick="return confirm('Вы уверены, что хотите удалить этот атрибут?');">Удалить</a>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="3">Атрибуты не найдены.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Кнопка для добавления нового атрибута -->
  <a href="{% url 'attribute_create' asset_type_id=asset_type.id %}" class="btn btn-primary">Добавить новый атрибут</a>

  {% if editable %}
    <h3>Редактирование типа актива</h3>
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="btn btn-primary">Сохранить изменения</button>
    </form>
  {% endif %}
{% endblock %}
